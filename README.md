# car_brand_model_keyword
언어공학과 문화콘텐츠

자동차 브랜드 정보 제공 검색 프로그램
1. 프로젝트 진행 배경
1.1. 필요성
궁금한 정보를 검색 포털에서 검색할 시 보게 되는 결과는 일부 상위의 결과 뿐이며 아무리 많은 정보를 수집해도 수동적으로 정보를 수집하는 것은 양의 문제가 존재한다. 상위의 정보만 보고 판단하게 될 시 편협한 정보만을 접하게 될 수 있으며, 전체적인 대중의 반응, 대략적인 정보 등을 파악하기에 어려움이 있다. 예를 들어, 네이버 검색창에 어떤 물품의 후기가 궁금하여 검색했을 때, 그 물품에 대한 다양한 사람의 의견을 확인하고 싶은데, 검색했을 때 뜨는 여러 블로그, 인터넷 카페 글 등을 확인했을 때에 여전히 그 물품에 대한 정보가 부족하다고 느끼는 경우가 있으며, 실제로 그 물품을 구입했을 때 확인했던 정보와 다른 경우가 있다. 하지만 검색된 전체 정보를 직접 확인하기에는 경제성이 떨어진다. 따라서 검색어를 활용하여 전체적인 정보를 객관적으로 확인하고, 특정 검색어에 대한 대중의 반응을 한 번에 확인할 수 있는 서비스가 필요하다.  
1.2. 주제 선택 배경
자동차를 새로 구입하고자 할 때에 어느 브랜드의 자동차를 구입할지, 특정 브랜드의 자동차들의 성능은 어느 정도인지, 현재 트렌드가 어떠한지 검색 후 구입하게 된다. 이때에 자동차 브랜드에 관한 정보를 찾는데 너무 많은 시간을 소비하지 않고 단일 검색으로 확인할 수 있는 프로그램의 필요성에서 해당 프로젝트가 시작되었다. 자동차 브랜드 뿐만 아니라 현재 전기차, 주식 등 자동차 브랜드와 관련하여 항상 등장하는 주제에 대해서도 함께 검색할 수 있는 기능 또한 필요하다고 생각하여 해당 기능도 접목시켜, 사용자가 원하는 자동차 브랜드와 특정 정보를 함께 검색할 수 있는 프로그램 제작을 프로젝트 주제로 삼게 되었다.

2. 서비스 개요
 
<Figure1. 프로그램 알고리즘>
프로그램은 사용자로부터 정보와 후기 중 궁금한 것을 입력받으며 시작한다. 그 후 어느 브랜드에 대해 검색할지 브랜드를 입력받는다. 사용자가 정보를 검색하는 경우, 해당 브랜드의 어떤 정보에 대해 검색할지 검색 키워드까지 입력받는다. 정보와 후기 검색 모두 사용자가 입력한 검색어를 토대로 데이터를 수집하고 전처리한다. 그 후 동일하게 단어 빈도수 분석을 진행하고, 정보의 경우 브랜드명 주변에 가장 많이 등장하는 단어를 분석하며, 후기의 경우 감성 분석을 진행한다. 분석이 완료되면 마지막으로 사용자에게 결과를 출력해주며 마무리한다. 

3. 서비스 프로세스
3.1. 데이터 수집
사용자가 검색어를 입력하게 되면 우선 입력한 검색어를 활용하여 데이터 수집을 진행한다. 이때 데이터는 네이버 검색 API를 활용하여 수집한다. 네이버 카페, 네이버 뉴스, 네이버 블로그 검색 API를 활용하는데, 정보 검색의 경우 보다 객관적이고 사실적인 정보를 수집하기 위하여 네이버 뉴스 검색 결과와 카페 검색 결과를 사용하였고, 후기 검색의 경우 사용자 기반의 데이터를 수집하기 위하여 네이버 카페와 블로그 검색 결과를 사용하였다. 검색 API를 활용하여 사용자의 검색어를 입력하면 네이버 카페의 경우 제목, 링크, 카페 이름과 카페 링크가 데이터 프레임으로 저장되며, 네이버 뉴스는 제목, 링크, 내용, 날짜, 네이버 블로그는 제목, 글 링크, 내용, 블로거 이름, 블로거 링크가 데이터 프레임으로 저장된다. 프로그램에 설정된 개수만큼의 검색 결과를 저장하며, 개수는 1000개로 설정하였다. 
3.2. 데이터 전처리
저장된 데이터 프레임에서 분석에 필요한 열만 추출한다. drop 함수를 사용하여 네이버 카페와 블로그 검색 결과가 저장된 데이터 프레임에서는 제목과 내용 외 열을 삭제하고, 뉴스의 경우 내용 외 열을 삭제한다. 남은 열의 정보는 문장 단위로 하나의 리스트에 저장하여 전처리를 진행한다.
3.2.1. 사용한 언어처리 툴
수집한 데이터를 전처리를 할 때에는 KoNLPy 패키지를 사용하였다. KoNLPy는 파이썬으로 한국어 정보처리를 할 수 있는 패키지로, 파이썬의 범언어적 자연어처리 패키지인 NLTK와 유사한 언어처리 패키지이다(박은정, 조성준, 2014). KoNLPy는 간단하게 한국어 정보처리를 가능하게 하며, 형태소 분석과 품사 태깅, 최빈 형태소 찾기 등을 할 수 있으며 다른 패키지와 함께 사용하면 더욱 다양한 분석을 할 수 있다(위의 글, 2014). 주로 한국어로 검색 결과가 나타나는 네이버 API를 활용하기 때문에 KoNLPy가 분석에 적합하다고 판단하여 사용하였다. KoNLPy에서는 한나눔, 꼬꼬마, 코모란, 메카브, 오픈소스 한국어 분석기를 형태소 분석기로 제공하는데, 이 중에서 과거의 트위터 분석기를 발전시킨 오픈소스 한국어 분석기를 사용하였다.
3.2.2. 언어처리 툴을 사용한 전처리 과정 및 결과
데이터 프레임에서 필요한 열만 선택하여 문장 형태로 저장한 리스트를 전처리 하는 함수에 입력하여 일괄적으로 전처리를 진행하고자 한다. 전처리 함수는 사용자 정의 함수이며, KoNLPy를 활용하여 형태소 분석 및 불용어를 제거하는 과정이 포함되어 있다. 
전처리 함수에서는 우선 KoNLPy의 Open Korean Text (이하 okt) 라이브러리를 사용하여 형태소 분석을 진행한다. pos 함수로 형태소에 품사를 태깅한 후에 명사, 동사, 형용사에 해당하는 형태소만 추출한다. 형태소 분석 후 불용어를 제거하는데, 불용어 리스트는 기본 한국어 불용어 리스트에 프로그램의 주제에 맞게 ‘차’, ‘자동차’를 추가하였고, 이외에도 ‘이’, ‘은’과 같은 조사 일부를 추가하였다. 불용어 리스트에 없는 단어만을 분석 대상 리스트에 추가하였다. 명사, 동사, 형용사이면서 불용어 리스트에 없는 형태소로 이루어진 단어의 리스트를 최종적인 전처리 결과 리스트에 저장한다. 
3.3. 데이터 분석
앞선 전처리 결과를 데이터 분석에 이용하며, 각각의 분석 과정은 함수로 정의하였다. 
3.3.1. 분석에 사용된 라이브러리 및 감성사전
파일을 불러오고 검색 API를 활용하기 위해 사용한 라이브러리와 모듈을 먼저 살펴보면, os 모듈은 운영체제와 상호작용하여 파일에 접근하기 위하여 불러온다. sys 모듈은 파이썬 인터프리터와 관련된 작업을 수행하기 위해 불러오며, re 모듈은 정규 표현식(regular expressions)을 사용해서 문자열을 처리하기 위해 불러온다. urllib 라이브러리의 request 모듈은 URL을 열기 위해 불러오며, 웹에서 데이터를 가져오는 기본 기능을 제공하므로 유용하다. 
다음으로 언어 데이터를 분석하는데 사용한 라이브러리에 대해 설명하고자 한다. 단어의 빈도수를 계산하여 가장 많이 등장하는 단어들을 출력하기 위해 collections 모듈의 counter 클래스를 사용한다. Counter 클래스는 해시 가능한 객체의 개수를 세는데 사용되는 컨테이너 데이터 유형이다. Counter 객체 안에 리스트나 스트링을 넣으면 딕셔너리 형태로 단어와 빈도수를 반환한다. most_common 메서드는 파라미터로 설정한 수만큼의 상위 빈도수 단어를 반환한다. 
사용된 라이브러리는 모두 파이썬 내장 라이브러리로 별도의 설치가 필요하지 않다.
감성 사전은 군산대학교 소프트웨어융합공학과 Data Intelligence Lab에서 개발한 KNU 한국어 감성 사전을 사용하였다. 해당 감성사전은 여러 자료를 통합해 표준국어대사전을 구성하는 각 단어의 뜻풀이를 분석하여 긍부정어를 추출하였고, 1-gram, 2-gram, n-gram, 축약어, 이모티콘 등 다양한 종류의 긍부정어를 포함하고 있어 효율적인 감성 분석이 가능하다(박상민 외, 2018).
3.3.2. 분석 과정 및 결과
네이버 블로그, 카페, 뉴스 검색 API를 활용하여 가져온 데이터를 전처리 한 후 저장한 리스트를 input 리스트로 사용한다. 단어 빈도수 계산 함수, 감성 분석 함수, 랜덤 문장 출력 함수, 브랜드명 주변 단어 분석 함수로 총 네 가지의 사용자 정의 함수를 작성하였다. 
단어 빈도수 계산 함수의 경우 전처리된 리스트, 브랜드명과 검색어를 파라미터로 입력받는다. Counter 객체를 생성하여 등장하는 각 단어의 빈도수를 저장하는데, 이때에 검색하는 브랜드와 정보, 즉 검색 키워드는 제외한다. 빈도수를 계산하여 word_counts 변수에 저장을 한 후 most_common 메서드를 활용하여 가장 상위의 7개 단어만을 단어와 빈도수를 함께 튜플 형태로 결과 리스트에 추가한다. 
감성 분석 함수를 정의하기에 앞서, 감성 사전을 불러오기 위하여 파일을 불러와 읽는 함수를 정의한다. 이 함수를 사용하여 드라이브에 저장되어 있는 긍정, 부정, 중립어 텍스트 파일을 불러와 리스트 형태로 감성어들을 저장한다. 그 후 감성 분석하는 함수를 정의하는데, 감성 분석 함수 또한 전처리 된 리스트를 파라미터로 입력받는다. 긍정, 부정, 중립어의 수를 저장할 변수를 생성하고, 입력된 리스트를 긍정어, 부정어, 중립어 각각의 리스트와 비교하여 존재하면 각각 count 하는 변수에 1을 더한다. 최종적으로는 리스트의 전체 단어 개수, 긍정어 개수, 부정어 개수, 중립어 개수를 반환한다.
랜덤 문장 출력 함수는 처음 네이버 API를 활용하여 얻은, 전처리하기 전 원본 데이터 프레임을 파라미터로 입력받는데, 이 데이터 프레임에서 내용 부분의 칼럼만 선택하여 그 중에 랜덤으로 3개만 리스트로 저장한다.
브랜드 주변 단어 빈도수 추출 함수는 검색어보다 검색 결과에서 브랜드명과 함께 등장하는 단어를 분석하는 것이 더욱 의의가 있을 것으로 판단하여 검색어가 아닌 브랜드명과 함께 등장하는 상위의 단어를 분석하였다. 앞의 단어 빈도수 계산 함수와 유사하지만, 범위를 설정하여 설정한 범위만큼의 검색어 주변의 단어의 빈도수를 추출하도록 설정한다. 해당 서비스에서는 검색어 양쪽으로 5개의 단어로 설정하였으며, 주변 단어 중 상위 4개의 단어만을 추출하도록 하였다. 따라서 브랜드명 주변 단어의 상위 빈도수 단어 4개가 (단어, 빈도수)의 튜플 형태로 리스트에 저장된다. 
3.4. 주요 실행 부분
3.4.1. 정보 분석
우선 사용자에게 보여지는 main 서비스 부분에서 category 변수에 사용자가 정보를 검색하는지, 후기를 검색하는지 입력받아 저장한다. 입력된 값이 ‘정보’라면 자동차 브랜드를 brand_name으로 입력받은 후 search_word에 어떤 정보를 검색할지 입력받아 저장한다. 그 후 브랜드명과 검색할 정보를 입력값으로 하는 정보 처리 함수를 불러온다. 이 함수에서는 앞에서 설명한 함수 중에 API 활용 함수, 전처리 함수, 빈도수 분석 함수, 주변어 분석 함수를 불러온다. 정보 검색은 객관적인 정보와 자동차 자체에 관심 있는 사람들이 제공하는 정보를 검색하기 위하여 네이버 뉴스와 카페의 검색 결과를 활용한다. 각각의 함수 처리 결과를 따로 변수에 저장해 두고 사용자에게 결과를 출력한다. 
3.4.2. 후기 분석
입력된 값이 ‘후기’라면 자동차 브랜드만 brand_name 으로 입력받는다. review_str 변수에는 ‘후기’를 저장해두고 위의 정보 검색 함수에서 검색어와 유사하게 사용한다. 후기의 경우 브랜드명과 ‘후기’를 입력값으로 하는 정보 처리 함수를 불러오는데, 이 함수는 우선 정보와 동일하게 API 활용 함수, 전처리 함수를 불러온다. 후기는 객관적인 정보보다는 사용자의 경험, 직접적인 정보를 사용하기 위하여 네이버 카페와 블로그 검색 결과를 활용한다. 후기 또한 빈도수 분석 함수를 불러오며, 또한 사용자의 경험인 만큼 감성 분석을 하여 브랜드에 대한 전체적인 사용자의 반응을 알 수 있도록 한다. 마지막으로 사용자의 후기를 처리되지 않은 형태로도 확인할 수 있도록 원본 검색 결과를 일부 보여주도록 랜덤 문장 출력 함수를 불러온다. 이 또한 함수 처리 결과를 변수에 저장해 둔다.

3.4.3. 결과 출력
함수 처리한 결과는 검색 함수를 제외하고는 리스트 형태 혹은 변수로 저장되어 있다. 단어 빈도수의 경우 리스트의 요소를 하나씩 출력하며 1위부터 7위까지 확인할 수 있도록 하고, 주변어 출력 또한 리스트의 요소를 하나씩 접근하여 출력한다. 감성 분석은 총 단어 개수, 긍정어 개수, 부정어 개수, 중립어 개수가 각각 보여지도록 한다. 검색 결과 예시는 내용 하나씩 각 열을 출력한다. 따라서 사용자에게 보여지는 화면은 다음과 같다.
 	 
<Figure 2. 정보 검색 결과>			<Figure3. 후기 검색 결과 예시>
4. 기대효과 및 활용 방안
자동차 브랜드 검색 서비스는 사용자에게 객관적이고 포괄적인 정보를 제공할 수 있기에 의의가 있다. 자동차 구입을 계획하고 있는 사람에게 사전 정보를 파악하기에 유용한 서비스가 될 수 있으며, 자동차 구입 외에도 자동차 브랜드와 관련하여 주식, 모델, 브랜드 평가 등을 검색할 때에 유용한 서비스가 된다. 개인 사용자 뿐만 아니라 기업에게도 유용한 서비스가 될 수 있다. 기업에서 사용자의 경험 및 후기, 평가를 수집하여 대략적인 고객들의 반응과 요구를 파악하고, 필요한 방향으로 발전 방향을 조정하는데 사용할 수 있으며, 마케팅에도 도움이 될 수 있다. 또한 해당 서비스는 자동차 브랜드를 검색하는데 사용되도록 만들어졌지만, 불용어 리스트를 수정하고 검색어 및 사용자 입력 부분 등을 수정한다면 자동차 외 다른 분야의 검색어에도 동일하게 적용할 수 있다. 

5. 한계점, 개선점
네이버 카페, 뉴스, 블로그의 검색 결과를 활용하기 때문에 검색어를 입력했을 때 해당 검색어와 관련하여 업로드 되어 있는 글이 많지 않을 때에는 분석의 의미가 없는 경우가 있을 수 있다. 이 경우 유사한 다른 단어로 검색할 수 있도록 수정할 수 있을 것이다. 또한 사용자가 자동차 브랜드를 입력할 때에 자동차 브랜드가 아니면 다시 입력할 수 있도록 해야 하는데, 이를 위해서는 전세계의 자동차 브랜드의 리스트가 필요하다. 
분석 과정에서는 후기에서 중요한 ‘시승’이라는 단어를 형태소 분석기가 한 단어로 분석하지 못하는 등 형태소 분석이 제대로 이루어지지 않는 경우가 있는데, 따라서 형태소 분석기 또한 수정의 필요성이 있다.
이외에 입력하는 검색어, 출력 결과 해석과 관련하여 사용자에게 프로그램 이용 설명서를 제공하여 사용에 편리함을 더할 수 있을 것이다.
 
박상민, 나철원, 최민성, 이다희, & 온병원. (2018). Bi-LSTM 기반의 한국어 감성사전 구축 방안. 지능정보연구,24(4). 219-240.
박은정, 조성준. (2014). KoNLPy: 쉽고 간결한 한국어 정보처리 파이썬 패키지, 한국정보과학회 언어공학연구회:학술대회논문집(한글 및 한국어 정보처리). 2014.10a. 133-136.파이썬 표준 라이브러리. 파이썬. https://docs.python.org/ko/3/library/index.html
![image](https://github.com/user-attachments/assets/39b3e04c-06d9-45e9-95a2-dbe90dadedcb)
